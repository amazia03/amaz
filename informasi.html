<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tweets & Note Series - Website Pribadi</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,400;0,700;1,400&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
    />
    <link rel="stylesheet" href="css/style.css" />
    <style>
      /* Style untuk search bar */
      .search-container {
        margin-bottom: 20px;
        text-align: left;
      }
      #search-input {
        width: 100%;
        padding: 12px;
        background-color: var(--surface-color);
        border: 1px solid var(--border-color);
        border-radius: 5px;
        color: var(--text-color);
        font-size: 1em;
        font-family: "Poppins", sans-serif;
      }
    </style>
  </head>
  <body>
    <div id="particles-js"></div>

    <header id="header-placeholder"></header>

    <main>
      <div class="container">
        <h2 class="animate-on-scroll">Tweets & Note Series</h2>
        <p class="animate-on-scroll" style="margin-bottom: 40px">
          Kumpulan pemikiran singkat, catatan,Tweets yang sekirannya menarik for
          me.
        </p>

        <div
          class="controls-container animate-on-scroll"
          style="
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
          "
        >
          <div class="search-container" style="flex-grow: 1">
            <input
              type="text"
              id="search-input"
              placeholder="Cari berdasarkan konten, judul, atau tag..."
            />
          </div>
          <div class="sort-container" style="margin-bottom: 0">
            <label for="info-sorter">Urutkan:</label>
            <select id="info-sorter" class="sorter">
              <option value="terbaru">Terbaru</option>
              <option value="terlama">Terlama</option>
            </select>
          </div>
        </div>

        <div class="info-list">
  </div>
            <p class="info-meta">
              <i class="fas fa-calendar-alt"></i> 6 des 2012
            </p>
            <div class="info-body">
              <p>
                Ilmu pengetahuan yang baik adalah yang menyisakan pertanyaan,
                sebagai pijakan untuk berkembangan ilmu itu sendiri. Tidak
                pernah final...
              </p>
            </div>
          </div>
          <div class="info-item animate-on-scroll" data-tanggal="1994-10-13">
            <div class="info-header">
              <h3>pale blue dot</h3>
              <span class="info-tag tag-pengumuman">kutipan</span>
            </div>
            <p class="info-meta">
              <i class="fas fa-calendar-alt"></i> 1994-10-13
            </p>
            <div class="info-body">
              <p>
                Dari jarak sejauh ini, Bumi tidak lagi terlihat penting. Namun
                bagi kita, lain lagi ceritanya. Tataplah lagi titik itu. Titik
                itulah yang dinamai 'di sini.' Itulah rumah. Itulah kita. Di
                satu titik itu semua orang yang kamu cintai, semua orang yang
                kamu kenal, semua orang yang pernah kamu dengar namanya, semua
                manusia yang pernah ada, menghabiskan hidup mereka. Segenap
                kebahagiaan dan penderitaan kita, ribuan agama, pemikiran, dan
                doktrin ekonomi yang merasa benar, setiap pemburu dan perambah,
                setiap pahlawan dan pengecut, setiap pembangun dan pemusnah
                peradaban, setiap raja dan petani, setiap pasangan muda yang
                jatuh cinta, setiap ibu dan ayah, anak yang bercita-cita tinggi,
                penemu dan penjelajah, setiap pengajar kebaikan, setiap politisi
                busuk, setiap "bintang pujaan", setiap "pemimpin besar", setiap
                orang suci dan pendosa sepanjang sejarah spesies manusia hidup
                di sana, di atas setitik debu yang melayang dalam seberkas
                sinar. Bumi adalah panggung yang amat kecil di tengah luasnya
                arena kosmik. Renungkanlah sungai darah yang ditumpahkan para
                jenderal dan maharaja sehingga dalam keagungan dan kejayaan itu
                mereka dapat menjadi penguasa sementara di sebagian kecil dari
                titik itu. Renungkanlah kekejaman tanpa akhir yang dilakukan
                orang-orang di satu sudut titik ini terhadap orang-orang tak
                dikenal di sudut titik yang lain, betapa sering mereka salah
                paham, betapa siap mereka untuk membunuh satu sama lain, betapa
                bergejolak kebencian mereka. Sikap kita, keistimewaan kita yang
                semu, khayalan bahwa kita memiliki tempat penting di alam
                semesta ini, tidak berarti apapun di hadapan setitik cahaya
                redup ini. Planet kita hanyalah sebutir debu yang kesepian di
                alam yang besar dan gelap. Dalam kebingungan kita, di tengah -
                luasnya jagat raya ini, tiada tanda bahwa pertolongan akan
                datang dari tempat lain untuk menyelamatkan kita dari diri kita
                sendiri. Bumi adalah satu-satunya dunia, sejauh ini, yang
                diketahui memiliki kehidupan. Tidak ada tempat lain, setidaknya
                sampai beberapa waktu ke depan, yang bisa dijadikan tempat
                tinggal. Ada yang bisa kita kunjungi, tetapi belum ada yang bisa
                kita tinggali. Suka atau tidak, untuk saat ini, Bumi adalah
                satu-satunya tempat kita hidup. Sering dikatakan bahwa astronomi
                adalah sebuah pengalaman yang menumbuhkan kerendahan hati dan
                membangun kepribadian. Mungkin tak ada yang dapat menunjukkan
                laknatnya kesombongan manusia secara lebih baik selain citra
                dunia kita yang mungil ini. Bagiku, gambar ini mempertegas
                tanggung jawab kita untuk bertindak lebih baik terhadap satu
                sama lain, dan menjaga serta merawat sang titik biru pucat,
                satu-satunya rumah yang kita kenal selama ini. â€”â€‰Carl Sagan,
                pidato di Universitas Cornell, 13 Oktober 1994
              </p>
            </div>
          </div>
          <div class="info-item animate-on-scroll" data-tanggal="2020-03-27">
            <div class="info-header">
              <h3>truts</h3>
              <span class="info-tag tag-update">Tweets</span>
            </div>
            <p class="info-meta">
              <i class="fas fa-calendar-alt"></i> 2020-03-27"
            </p>
            <div class="info-body">
              <p>
                Hanya karena Anda ingin hal itu benar, bukan berarti itu benar.
                Hanya karena miliaran orang percaya, bukan berarti mereka harus
                percaya. Dan hanya karena kebenaran itu menyakitkan, bukan
                berarti kebenaran itu tidak benar.
              </p>
            </div>
          </div>
        </div>
      </div>
    </main>

    <footer id="footer-placeholder"></footer>

    <script src="https://cdn.jsdelivr.net/npm/tsparticles@2.12.0/tsparticles.bundle.min.js"></script>
    <script src="js/script.js" defer></script>
    <script>
  document.addEventListener("DOMContentLoaded", function () {
    const infoListContainer = document.querySelector(".info-list");
    const searchInput = document.getElementById("search-input");
    const sorter = document.getElementById("info-sorter");
    let allInfoItems = []; // Untuk menyimpan semua data dari JSON

    // 1. Fungsi untuk merender item ke halaman
    function renderItems(items) {
      infoListContainer.innerHTML = ""; // Kosongkan kontainer dulu
      items.forEach((item) => {
        const infoItemDiv = document.createElement("div");
        infoItemDiv.className = "info-item animate-on-scroll";
        // Gunakan tanggal dari JSON untuk dataset pengurutan
        infoItemDiv.setAttribute("data-tanggal", item.tanggal);

        infoItemDiv.innerHTML = `
          <div class="info-header">
            <h3>${item.judul}</h3>
            <span class="info-tag ${item.tag.kelas}">${item.tag.teks}</span>
          </div>
          <p class="info-meta">
            <i class="fas fa-calendar-alt"></i> ${item.meta_info}
          </p>
          <div class="info-body">
            ${item.konten_html}
          </div>
        `;
        infoListContainer.appendChild(infoItemDiv);
      });
      // Inisialisasi ulang animasi untuk item yang baru ditambahkan
      if (typeof window.initializeScrollAnimation === 'function') {
        window.initializeScrollAnimation();
      }
    }

    // 2. Fungsi untuk memuat data dari JSON
    fetch("informasi.json")
      .then((response) => response.json())
      .then((data) => {
        allInfoItems = data.informasi;
        // Urutkan berdasarkan 'terbaru' saat pertama kali dimuat
        allInfoItems.sort((a, b) => new Date(b.tanggal) - new Date(a.tanggal));
        renderItems(allInfoItems);
        setupEventListeners(); // Panggil event listener setelah data siap
      })
      .catch((error) => {
        console.error("Gagal memuat data informasi:", error);
        infoListContainer.innerHTML = "<p>Gagal memuat data. Silakan coba lagi nanti.</p>";
      });

    // 3. Fungsi untuk mengatur semua event listener (search & sort)
    function setupEventListeners() {
        function handleFilterAndSort() {
            const searchTerm = searchInput.value.toLowerCase();
            const sortOrder = sorter.value;

            // Filter berdasarkan pencarian
            let filteredItems = allInfoItems.filter(item => {
                const judul = item.judul.toLowerCase();
                const konten = item.konten_html.toLowerCase();
                const tag = item.tag.teks.toLowerCase();
                return judul.includes(searchTerm) || konten.includes(searchTerm) || tag.includes(searchTerm);
            });

            // Urutkan hasil filter
            filteredItems.sort((a, b) => {
                const dateA = new Date(a.tanggal);
                const dateB = new Date(b.tanggal);
                return sortOrder === 'terbaru' ? dateB - dateA : dateA - dateB;
            });

            renderItems(filteredItems);

            // Fungsi highlight (opsional, bisa disempurnakan)
            if (searchTerm) {
                highlightTextInContainer(searchTerm);
            }
        }

        searchInput.addEventListener("input", debounce(handleFilterAndSort, 300));
        sorter.addEventListener("change", handleFilterAndSort);
    }

    // 4. Fungsi untuk highlight
    function highlightTextInContainer(searchTerm) {
        const regex = new RegExp(searchTerm, "gi");
        const itemsToHighlight = infoListContainer.querySelectorAll('.info-item');

        itemsToHighlight.forEach(item => {
            const titleElement = item.querySelector("h3");
            const contentElement = item.querySelector(".info-body");

            // Hapus highlight sebelumnya
            titleElement.innerHTML = titleElement.innerHTML.replace(/<span class="highlight">/g, '').replace(/<\/span>/g, '');
            contentElement.innerHTML = contentElement.innerHTML.replace(/<span class="highlight">/g, '').replace(/<\/span>/g, '');

            // Tambahkan highlight baru
            titleElement.innerHTML = titleElement.innerHTML.replace(regex, '<span class="highlight">$&</span>');
            contentElement.innerHTML = contentElement.innerHTML.replace(regex, '<span class="highlight">$&</span>');
        });
    }
  });
</script>
  </body>
</html>
